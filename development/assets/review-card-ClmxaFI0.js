import{r as s,j as r}from"./index-Rok2_v23.js";import{S as u}from"./star-icon-HYOC1vuo.js";import{R as f}from"./right-arrow-icon-B_SnIIqd.js";import{v}from"./index-D-XUv58_.js";import{u as g}from"./review-context-rNaIlrNa.js";import{T as x}from"./text-link-arrow-CVkLlgfj.js";const j=(e,i)=>{let t;return(...n)=>{t&&clearTimeout(t),t=setTimeout(()=>e(...n),i)}},p=(e=1e3)=>{const[i,t]=s.useState({width:window.innerWidth,height:window.innerHeight});return s.useEffect(()=>{const n=j(()=>{t({width:window.innerWidth,height:window.innerHeight})},e);return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[e]),i},E=({data:e,settings:i})=>{const t=s.useRef(null),n=p(i.resizeDelay),[a,o]=s.useState({overflowFlag:!1,content:[e.origMsg]});return s.useLayoutEffect(()=>{const c=t.current;c&&v({data:{...e,origElem:c},settings:i}).then(d=>o(d))},[n]),{validatedData:a,reviewTextRef:t}},R=e=>{const[i,t]=s.useState(!1);return s.useEffect(()=>{t(window.matchMedia(e).matches)},[]),s.useEffect(()=>{const n=window.matchMedia(e),a=o=>t(o.matches);return n.addEventListener("change",a),()=>n.removeEventListener("change",a)},[]),i},z=e=>new Date(e).toLocaleDateString("ru-RU");function D({reviewerNickname:e,createdDate:i,reviewText:t,rating:n,bgImage:a,reviewLink:o,readMoreText:c,hasUnderlineHover:d=!0}){const{themeColor:l}=g(),m=R("(max-width: 991px)"),{reviewTextRef:w,validatedData:h}=E({data:{origMsg:t},settings:{rows:8,resizeDelay:100,endElem:r.jsx("span",{children:"..."},t)}});return r.jsxs("li",{className:"review-card",style:{backgroundColor:m?"transparent":l,backgroundImage:m?"none":`url(${a})`,backgroundSize:"cover",backgroundPosition:"center"},children:[r.jsxs("header",{className:"review-card__header",children:[r.jsxs("div",{className:"review-card__header-main",children:[r.jsx("h3",{children:e}),r.jsxs("span",{className:"review-card__header-rating",children:[r.jsx(u,{}),n,",0"]})]}),r.jsx("time",{dateTime:i,children:z(i)})]}),r.jsxs("div",{className:"review-card__content",children:[r.jsx("p",{ref:w,children:h.content}),h.overflowFlag&&r.jsx(x,{href:o,text:c,rightIcon:r.jsx(f,{style:{marginLeft:"0.5em",verticalAlign:"middle"}}),isNewTab:!0,color:l,hoverColor:l,hasUnderlineHover:d})]})]})}export{D as R,R as u};
