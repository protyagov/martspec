var C=r=>{throw TypeError(r)};var R=(r,e,t)=>e.has(r)||C("Cannot "+t);var o=(r,e,t)=>(R(r,e,"read from private field"),t?t.call(r):e.get(r)),l=(r,e,t)=>e.has(r)?C("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),c=(r,e,t,i)=>(R(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),g=(r,e,t)=>(R(r,e,"access private method"),t);import{j as p,R as A}from"./index-BQEVMegz.js";import{u as b}from"./review-context-B_W5ecut.js";import{R as N}from"./right-arrow-icon-C92yI81Z.js";import{T as O}from"./text-link-arrow-BAHeMhJn.js";import{a as F}from"./app-ids-CkH1oDs0.js";function K({link:r,posIndex:e}){const{text:t}=b();return p.jsx("li",{className:"review-card filler-card",children:p.jsxs("div",{className:"filler-card__wrapper",children:[p.jsx("h3",{className:"filler-card__header",children:t.fillerCard.head[e]}),r]})})}var d;class z{constructor(){l(this,d);this.getReviewData=async e=>await(await fetch(o(this,d).call(this,e))).json(),c(this,d,({appId:e,dataType:t="json",countryCode:i="us",page:s=1})=>`https://itunes.apple.com/${i}/rss/customerreviews/page=${s}/id=${e}/sortBy=mostRecent/${t}?l=en&cc=gb`)}}d=new WeakMap;const{getReviewData:Q}=new z;var f,y,w,m,v,x,E,u;class _{constructor(){l(this,f);l(this,y);l(this,w);l(this,m);l(this,v);l(this,x);l(this,E);l(this,u);this.validateReviewMsg=async({data:e,settings:t})=>{const i=getComputedStyle(e.origElem),s=o(this,w).call(this,{data:{origElemStyles:i}}),a=o(this,v).call(this,{data:{origElemStyles:i},settings:t}),S=e.origElem.scrollHeight>a;if(e.origElem.dataset.overflowFlag==="true"||S){e.origElem.dataset.overflowFlag="true",document.body.appendChild(s);const $=await o(this,f).call(this,{data:{...e,tempElem:s},settings:{maxHeight:a}});document.body.removeChild(s);const H=o(this,m).call(this,t.endElem).length;return{overflowFlag:!0,content:[await o(this,y).call(this,{data:e,settings:{endElemLength:H,truncationIndex:$}}),t.endElem]}}return e.origElem.dataset.overflowFlag="false",{overflowFlag:!1,content:[e.origMsg]}},c(this,f,async({data:e,settings:t})=>{if(!e.origMsg.length)return 0;let i=0,s=e.origMsg.length-1;for(;i<=s;){const a=Math.floor((i+s)/2),S=e.origMsg.substring(0,a);e.tempElem.textContent=S,e.tempElem.scrollHeight<=t.maxHeight?i=a+1:s=a-1}return s}),c(this,y,async({data:e,settings:t})=>{if(t.truncationIndex===0)return e.origMsg;const i=t.truncationIndex-t.endElemLength,s=e.origMsg.lastIndexOf(" ",i);return s<0?e.origMsg.substring(0,i):e.origMsg.substring(0,s).replace(new RegExp("\\p{P}+$","gu"),"").trim()}),c(this,w,({data:e})=>{const t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.overflow="hidden",t.style.display="inline-block",t.style.whiteSpace="pre-wrap",t.style.fontSize=e.origElemStyles.fontSize,t.style.lineHeight=e.origElemStyles.lineHeight,t.style.fontFamily=e.origElemStyles.fontFamily,t.style.padding=e.origElemStyles.padding,t.style.margin=e.origElemStyles.margin,t.style.border=e.origElemStyles.border,t.style.maxWidth=e.origElemStyles.width,t.style.maxHeight=e.origElemStyles.height,t}),c(this,m,e=>typeof e=="string"?e:typeof e=="number"?e.toString():A.isValidElement(e)?A.Children.toArray(e.props.children).map(o(this,m)).join(""):""),c(this,v,({data:e,settings:t})=>t.rows*o(this,x).call(this,{data:{origElemStyles:e.origElemStyles}})),c(this,x,({data:e})=>parseFloat(e.origElemStyles.lineHeight)||parseFloat(e.origElemStyles.fontSize)),this.validateReviewData=async({reviewData:e,arrLength:t})=>e?Array.isArray(e)?e.length<t?[...e,...o(this,u).call(this,t-e.length)]:e:[e,...o(this,u).call(this,t-1)]:o(this,u).call(this,t),c(this,E,()=>({filler:!0})),c(this,u,e=>Array(e).fill(o(this,E).call(this)))}}f=new WeakMap,y=new WeakMap,w=new WeakMap,m=new WeakMap,v=new WeakMap,x=new WeakMap,E=new WeakMap,u=new WeakMap;const{validateReviewData:X,validateReviewMsg:Y}=new _;var n,M,j,L,h,I;class U{constructor(){l(this,n);this.sortReviews=async({validatedData:e,lang:t})=>e.sort((i,s)=>g(this,n,h).call(this,i)&&g(this,n,h).call(this,s)?0:g(this,n,h).call(this,i)?1:g(this,n,h).call(this,s)?-1:g(this,n,M).call(this,i,s,t))}}n=new WeakSet,M=function(e,t,i){const s=g(this,n,L).call(this,e,t);return s!==0?s:g(this,n,j).call(this,e,t,i)},j=function(e,t,i){const s=g(this,n,I).call(this,e.content.label,i),a=g(this,n,I).call(this,t.content.label,i);return s===a?0:s&&!a?-1:1},L=function(e,t){const i=parseInt(e["im:rating"].label);return parseInt(t["im:rating"].label)-i},h=function(e){return"filler"in e},I=function(e,t){const s={ar:/[\u0621-\u064A\u0660-\u0669]/,en:/[a-zA-Z]/,ru:/[а-яА-ЯёЁ]/,de:/[äöüß]/,hi:/[अ-ह]/,es:/[ñáéíóúü]/,fr:/[àâçéèêëîïôûù]/,zh:/[\u4E00-\u9FFF]/,ja:/[\u3040-\u30FF\uFF00-\uFFEF]/,pt:/[ãáâéêíóôú]/,uk:/[єіїґ]/}[t];return s?s.test(e):!1};const{sortReviews:ee}=new U;class B{constructor(){this.getAppId=()=>{const t=new URL(document.URL).pathname.split("/");let i;for(i in F)if(t.includes(i))return F[i];throw new Error(`ID NOT FOUND, pathnameItems:${JSON.stringify(t)}, appIds: ${JSON.stringify(F)}`)},this.getAppStoreLink=({data:e,option:t})=>`https://apps.apple.com/${e.countryCode||"us"}/app/id${e.appId}${t&&`?${t}`}`}}const{getAppId:te,getAppStoreLink:k}=new B;function re(){const{data:r,text:e}=b();return p.jsx(T,{text:e.fillerCard.link,href:k({data:{appId:r.appId,countryCode:r.countryCode},option:"action=write-review"})})}function ie(){const{data:r,text:e}=b();return p.jsx(T,{text:e.link,href:k({data:{appId:r.appId,countryCode:r.countryCode},option:"see-all=reviews"})})}function T(r){return p.jsx(O,{rightIcon:p.jsx(N,{}),isNewTab:!0,...r})}export{ie as A,K as R,re as S,Y as a,Q as g,ee as s,X as v};
