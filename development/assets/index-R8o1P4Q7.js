var R=s=>{throw TypeError(s)};var F=(s,e,t)=>e.has(s)||R("Cannot "+t);var o=(s,e,t)=>(F(s,e,"read from private field"),t?t.call(s):e.get(s)),l=(s,e,t)=>e.has(s)?R("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),g=(s,e,t,i)=>(F(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),c=(s,e,t)=>(F(s,e,"access private method"),t);import{R as b}from"./index-CORTva7I.js";import{a as x}from"./app-ids-DfxPsmPu.js";var h;class L{constructor(){l(this,h);this.getReviewData=async e=>await(await fetch(o(this,h).call(this,e))).json(),g(this,h,({appId:e,dataType:t="json",countryCode:i="us",page:r=1})=>`https://itunes.apple.com/${i}/rss/customerreviews/page=${r}/id=${e}/sortBy=mostRecent/${t}?l=en&cc=gb`)}}h=new WeakMap;const{getReviewData:V}=new L;var f,y,d,m,E,S,v,u;class T{constructor(){l(this,f);l(this,y);l(this,d);l(this,m);l(this,E);l(this,S);l(this,v);l(this,u);this.validateReviewMsg=async({data:e,settings:t})=>{const i=getComputedStyle(e.origElem),r=o(this,d).call(this,{data:{origElemStyles:i}}),a=o(this,E).call(this,{data:{origElemStyles:i},settings:t}),w=e.origElem.scrollHeight>a;if(e.origElem.dataset.overflowFlag==="true"||w){e.origElem.dataset.overflowFlag="true",document.body.appendChild(r);const C=await o(this,f).call(this,{data:{...e,tempElem:r},settings:{maxHeight:a}});document.body.removeChild(r);const H=o(this,m).call(this,t.endElem).length;return{overflowFlag:!0,content:[await o(this,y).call(this,{data:e,settings:{endElemLength:H,truncationIndex:C}}),t.endElem]}}return e.origElem.dataset.overflowFlag="false",{overflowFlag:!1,content:[e.origMsg]}},g(this,f,async({data:e,settings:t})=>{if(!e.origMsg.length)return 0;let i=0,r=e.origMsg.length-1;for(;i<=r;){const a=Math.floor((i+r)/2),w=e.origMsg.substring(0,a);e.tempElem.textContent=w,e.tempElem.scrollHeight<=t.maxHeight?i=a+1:r=a-1}return r}),g(this,y,async({data:e,settings:t})=>{if(t.truncationIndex===0)return e.origMsg;const i=t.truncationIndex-t.endElemLength,r=e.origMsg.lastIndexOf(" ",i);return r<0?e.origMsg.substring(0,i):e.origMsg.substring(0,r).replace(new RegExp("\\p{P}+$","gu"),"").trim()}),g(this,d,({data:e})=>{const t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.overflow="hidden",t.style.display="inline-block",t.style.whiteSpace="pre-wrap",t.style.fontSize=e.origElemStyles.fontSize,t.style.lineHeight=e.origElemStyles.lineHeight,t.style.fontFamily=e.origElemStyles.fontFamily,t.style.padding=e.origElemStyles.padding,t.style.margin=e.origElemStyles.margin,t.style.border=e.origElemStyles.border,t.style.maxWidth=e.origElemStyles.width,t.style.maxHeight=e.origElemStyles.height,t}),g(this,m,e=>typeof e=="string"?e:typeof e=="number"?e.toString():b.isValidElement(e)?b.Children.toArray(e.props.children).map(o(this,m)).join(""):""),g(this,E,({data:e,settings:t})=>t.rows*o(this,S).call(this,{data:{origElemStyles:e.origElemStyles}})),g(this,S,({data:e})=>parseFloat(e.origElemStyles.lineHeight)||parseFloat(e.origElemStyles.fontSize)),this.validateReviewData=async({reviewData:e,arrLength:t})=>e?Array.isArray(e)?e.length<t?[...e,...o(this,u).call(this,t-e.length)]:e:[e,...o(this,u).call(this,t-1)]:o(this,u).call(this,t),g(this,v,()=>({filler:!0})),g(this,u,e=>Array(e).fill(o(this,v).call(this)))}}f=new WeakMap,y=new WeakMap,d=new WeakMap,m=new WeakMap,E=new WeakMap,S=new WeakMap,v=new WeakMap,u=new WeakMap;const{validateReviewData:B,validateReviewMsg:P}=new T;var n,M,A,$,p,I;class O{constructor(){l(this,n);this.sortReviews=async({validatedData:e,lang:t})=>e.sort((i,r)=>c(this,n,p).call(this,i)&&c(this,n,p).call(this,r)?0:c(this,n,p).call(this,i)?1:c(this,n,p).call(this,r)?-1:c(this,n,M).call(this,i,r,t))}}n=new WeakSet,M=function(e,t,i){const r=c(this,n,$).call(this,e,t);return r!==0?r:c(this,n,A).call(this,e,t,i)},A=function(e,t,i){const r=c(this,n,I).call(this,e.content.label,i),a=c(this,n,I).call(this,t.content.label,i);return r===a?0:r&&!a?-1:1},$=function(e,t){const i=parseInt(e["im:rating"].label);return parseInt(t["im:rating"].label)-i},p=function(e){return"filler"in e},I=function(e,t){const r={ar:/[\u0621-\u064A\u0660-\u0669]/,en:/[a-zA-Z]/,ru:/[а-яА-ЯёЁ]/,de:/[äöüß]/,hi:/[अ-ह]/,es:/[ñáéíóúü]/,fr:/[àâçéèêëîïôûù]/,zh:/[\u4E00-\u9FFF]/,ja:/[\u3040-\u30FF\uFF00-\uFFEF]/,pt:/[ãáâéêíóôú]/,uk:/[єіїґ]/}[t];return r?r.test(e):!1};const{sortReviews:W}=new O;class k{constructor(){this.getAppId=()=>{const t=new URL(document.URL).pathname.split("/");let i;for(i in x)if(t.includes(i))return x[i];throw new Error(`ID NOT FOUND, pathnameItems:${JSON.stringify(t)}, appIds: ${JSON.stringify(x)}`)},this.getAppStoreLink=({data:e,option:t})=>`https://apps.apple.com/${e.countryCode||"us"}/app/id${e.appId}${t&&`?${t}`}`}}const{getAppId:Z,getAppStoreLink:q}=new k;export{V as a,B as b,q as g,W as s,P as v};
