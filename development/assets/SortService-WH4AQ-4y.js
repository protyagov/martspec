var R=s=>{throw TypeError(s)};var F=(s,e,t)=>e.has(s)||R("Cannot "+t);var l=(s,e,t)=>(F(s,e,"read from private field"),t?t.call(s):e.get(s)),o=(s,e,t)=>e.has(s)?R("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),g=(s,e,t,i)=>(F(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),c=(s,e,t)=>(F(s,e,"access private method"),t);import{R as b}from"./index-rmZ1l-0A.js";var p;class T{constructor(){o(this,p);this.getReviewData=async e=>await(await fetch(l(this,p).call(this,e))).json(),g(this,p,({appId:e,dataType:t="json",countryCode:i="us",page:r=1})=>`https://itunes.apple.com/${i}/rss/customerreviews/page=${r}/id=${e}/sortBy=mostRecent/${t}?l=en&cc=gb`)}}p=new WeakMap;const{getReviewData:V}=new T;var y,f,d,h,E,v,w,u;class z{constructor(){o(this,y);o(this,f);o(this,d);o(this,h);o(this,E);o(this,v);o(this,w);o(this,u);this.validateReviewMsg=async({data:e,settings:t})=>{const i=getComputedStyle(e.origElem),r=l(this,d).call(this,{data:{origElemStyles:i}}),a=l(this,E).call(this,{data:{origElemStyles:i},settings:t}),S=e.origElem.scrollHeight>a;if(e.origElem.dataset.overflowFlag==="true"||S){e.origElem.dataset.overflowFlag="true",document.body.appendChild(r);const C=await l(this,y).call(this,{data:{...e,tempElem:r},settings:{maxHeight:a}});document.body.removeChild(r);const A=l(this,h).call(this,t.endElem).length;return{overflowFlag:!0,content:[await l(this,f).call(this,{data:e,settings:{endElemLength:A,truncationIndex:C}}),t.endElem]}}return e.origElem.dataset.overflowFlag="false",{overflowFlag:!1,content:[e.origMsg]}},g(this,y,async({data:e,settings:t})=>{if(!e.origMsg.length)return 0;let i=0,r=e.origMsg.length-1;for(;i<=r;){const a=Math.floor((i+r)/2),S=e.origMsg.substring(0,a);e.tempElem.textContent=S,e.tempElem.scrollHeight<=t.maxHeight?i=a+1:r=a-1}return r}),g(this,f,async({data:e,settings:t})=>{if(t.truncationIndex===0)return e.origMsg;const i=t.truncationIndex-t.endElemLength,r=e.origMsg.lastIndexOf(" ",i);return r<0?e.origMsg.substring(0,i):e.origMsg.substring(0,r).replace(new RegExp("\\p{P}+$","gu"),"").trim()}),g(this,d,({data:e})=>{const t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.overflow="hidden",t.style.display="inline-block",t.style.whiteSpace="pre-wrap",t.style.fontSize=e.origElemStyles.fontSize,t.style.lineHeight=e.origElemStyles.lineHeight,t.style.fontFamily=e.origElemStyles.fontFamily,t.style.padding=e.origElemStyles.padding,t.style.margin=e.origElemStyles.margin,t.style.border=e.origElemStyles.border,t.style.maxWidth=e.origElemStyles.width,t.style.maxHeight=e.origElemStyles.height,t}),g(this,h,e=>typeof e=="string"?e:typeof e=="number"?e.toString():b.isValidElement(e)?b.Children.toArray(e.props.children).map(l(this,h)).join(""):""),g(this,E,({data:e,settings:t})=>t.rows*l(this,v).call(this,{data:{origElemStyles:e.origElemStyles}})),g(this,v,({data:e})=>parseFloat(e.origElemStyles.lineHeight)||parseFloat(e.origElemStyles.fontSize)),this.validateReviewData=async({reviewData:e,arrLength:t})=>e?Array.isArray(e)?e.length<t?[...e,...l(this,u).call(this,t-e.length)]:e:[e,...l(this,u).call(this,t-1)]:l(this,u).call(this,t),g(this,w,()=>({filler:!0})),g(this,u,e=>Array(e).fill(l(this,w).call(this)))}}y=new WeakMap,f=new WeakMap,d=new WeakMap,h=new WeakMap,E=new WeakMap,v=new WeakMap,w=new WeakMap,u=new WeakMap;const{validateReviewData:B,validateReviewMsg:P}=new z;var n,M,I,H,m,x;class j{constructor(){o(this,n);this.sortReviews=async({validatedData:e,lang:t})=>e.sort((i,r)=>c(this,n,m).call(this,i)&&c(this,n,m).call(this,r)?0:c(this,n,m).call(this,i)?1:c(this,n,m).call(this,r)?-1:c(this,n,M).call(this,i,r,t))}}n=new WeakSet,M=function(e,t,i){const r=c(this,n,H).call(this,e,t);return r!==0?r:c(this,n,I).call(this,e,t,i)},I=function(e,t,i){const r=c(this,n,x).call(this,e.content.label,i),a=c(this,n,x).call(this,t.content.label,i);return r===a?0:r&&!a?-1:1},H=function(e,t){const i=parseInt(e["im:rating"].label);return parseInt(t["im:rating"].label)-i},m=function(e){return"filler"in e},x=function(e,t){const r={ar:/[\u0621-\u064A\u0660-\u0669]/,en:/[a-zA-Z]/,ru:/[а-яА-ЯёЁ]/,de:/[äöüß]/,hi:/[अ-ह]/,es:/[ñáéíóúü]/,fr:/[àâçéèêëîïôûù]/,zh:/[\u4E00-\u9FFF]/,ja:/[\u3040-\u30FF\uFF00-\uFFEF]/,pt:/[ãáâéêíóôú]/,uk:/[єіїґ]/}[t];return r?r.test(e):!1};const{sortReviews:W}=new j;export{B as a,V as g,W as s,P as v};
